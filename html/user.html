<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard - Mobile Recharge</title>


    <link rel="stylesheet" href="../css/user.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">SpectrumLink</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link position-relative" href="#" id="notification-link">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge">3</span>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
                            <img src="../images/user.png" alt="User" class="profile-img me-2">
                            <span>Vinayak Mahadev</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#" id="profile-dropdown"><i class="fas fa-user me-2"></i> My Profile</a></li>
                            <!-- <li><a class="dropdown-item" href="#" id="settings-dropdown"><i class="fas fa-cog me-2"></i> Settings</a></li> -->
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="logout-dropdown"><i class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="sidebar">
        <a href="#" class="sidebar-link" data-section="dashboard-section">
            <i class="fas fa-home"></i>
            <span>Dashboard</span>
        </a>
        <a href="#" class="sidebar-link" data-section="recharge-history-section">
            <i class="fas fa-history"></i>
            <span>Recharge History</span>
        </a>
        <a href="#" class="sidebar-link" data-section="profile-settings-section">
            <i class="fas fa-user-cog"></i>
            <span>Profile & Settings</span>
        </a>
        <a href="#support-section" class="sidebar-link" data-section="support-section">
            <i class="fas fa-headset"></i>
            <span>Support</span>
        </a>
        <a href="index.html" class="sidebar-link" id="logout-link">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </a>
    </div>
    
    <div class="main-content">
      
        <div id="dashboard-section" class="content-section active">
            <div class="row">
                <div class="col-12">
                    <h3 class="mb-4">Dashboard</h3>
                </div>
                
                
                <div class="col-12 col-lg-6 mb-4">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span>Current Plan</span>
                            <div>
                                <!-- <button class="btn btn-primary btn-sm me-2">Renew Plan</button> -->
                                <button class="btn btn-outline-primary btn-sm">Change Plan</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="plan-details">
                                <div class="plan-name">Unlimited Plus</div>
                                <div class="mb-3">
                                    <i class="fas fa-mobile-alt me-2"></i> +91 9876543210
                                </div>
                                <div class="row mb-3">
                                    <div class="col-6 col-md-3">
                                        <div class="d-flex flex-column">
                                            <small class="text-muted">Data</small>
                                            <span class="fw-bold">50 GB</span>
                                        </div>
                                    </div>
                                    <div class="col-6 col-md-3">
                                        <div class="d-flex flex-column">
                                            <small class="text-muted">Voice</small>
                                            <span class="fw-bold">Unlimited</span>
                                        </div>
                                    </div>
                                    <div class="col-6 col-md-3">
                                        <div class="d-flex flex-column">
                                            <small class="text-muted">SMS</small>
                                            <span class="fw-bold">Unlimited</span>
                                        </div>
                                    </div>
                                    <div class="col-6 col-md-3">
                                        <div class="d-flex flex-column">
                                            <small class="text-muted">Validity</small>
                                            <span class="fw-bold">28 Days</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="progress mt-2 mb-2" style="height: 6px;">
                                    <div class="progress-bar bg-warning" role="progressbar" style="width: 65%;" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <small>19 days left</small>
                                    <small>Expires on March 17, 2025</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                
                <div class="col-12 col-lg-6 mb-4">
                    <div class="card">
                        <div class="card-header">Data Usage</div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="fw-bold">32.5 GB used of 50 GB</span>
                                <span class="badge bg-success">17.5 GB left</span>
                            </div>
                            <div class="progress mb-3" style="height: 10px;">
                                <div class="progress-bar bg-warning" role="progressbar" style="width: 65%;" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <div class="row mt-4">
                                <div class="col-6">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-arrow-down text-success me-2"></i>
                                        <div>
                                            <small class="d-block text-muted">Downloaded</small>
                                            <span class="fw-bold">22.8 GB</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="d-flex align-items-center">
                                        <i class="fas fa-arrow-up text-primary me-2"></i>
                                        <div>
                                            <small class="d-block text-muted">Uploaded</small>
                                            <span class="fw-bold">9.7 GB</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                
                <div class="col-12 col-md-6 mb-4">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span>Recent Recharges</span>
                            <a href="#" class="text-decoration-none" id="view-all-recharges">View All</a>
                        </div>
                        <div class="card-body">
                            <div class="transaction-item d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="fw-bold">Unlimited Plus</div>
                                    <div class="transaction-date">Feb 20, 2025</div>
                                </div>
                                <div class="transaction-amount">â‚¹799</div>
                            </div>
                            <div class="transaction-item d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="fw-bold">Data Booster</div>
                                    <div class="transaction-date">Feb 05, 2025</div>
                                </div>
                                <div class="transaction-amount">â‚¹499</div>
                            </div>
                            <div class="transaction-item d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="fw-bold">Unlimited Plus</div>
                                    <div class="transaction-date">Jan 20, 2025</div>
                                </div>
                                <div class="transaction-amount">â‚¹399</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                
                <div class="col-12 col-md-6 mb-4">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span>Notifications</span>
                            <a href="#" class="text-decoration-none" id="view-all-notifications">View All</a>
                        </div>
                        <div class="card-body">
                            <div class="transaction-item d-flex align-items-center">
                                <div class="me-3">
                                    <i class="fas fa-exclamation-circle text-warning fa-lg"></i>
                                </div>
                                <div>
                                    <div class="fw-bold">Your plan expires in 19 days</div>
                                    <div class="transaction-date">Today, 10:25 AM</div>
                                </div>
                            </div>
                            <div class="transaction-item d-flex align-items-center">
                                <div class="me-3">
                                    <i class="fas fa-gift text-danger fa-lg"></i>
                                </div>
                                <div>
                                    <div class="fw-bold">New offer available for you!</div>
                                    <div class="transaction-date">Yesterday, 3:45 PM</div>
                                </div>
                            </div>
                            <div class="transaction-item d-flex align-items-center">
                                <div class="me-3">
                                    <i class="fas fa-credit-card text-success fa-lg"></i>
                                </div>
                                <div>
                                    <div class="fw-bold">Recharge successful - â‚¹299</div>
                                    <div class="transaction-date">Feb 20, 2025, 9:30 AM</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Notification Modal -->
<div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="notificationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="notificationModalLabel">All Notifications</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="notificationModalBody">
                <!-- Notifications will be dynamically inserted here -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
                
                <div class="col-12 mb-4">
                    
                </div>
            </div>
        </div>
        
        
        <div id="recharge-history-section" class="content-section">
            <div class="row">
                <div class="col-12">
                    <h3 class="mb-4">Recharge History</h3>
                </div>
                <div class="col-12 mb-4">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span>All Transactions</span>
                            <div>
                                <select class="form-select form-select-sm" aria-label="Filter by">
                                    <option selected>All Time</option>
                                    <option>Last Month</option>
                                    <option>Last 3 Months</option>
                                    <option>Last 6 Months</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Transaction ID</th>
                                            <th>Date</th>
                                            <th>Plan</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>#TXN789012</td>
                                            <td>Mar 15, 2025</td>
                                            <td>Unlimited Plus</td>
                                            <td>â‚¹799</td>
                                            <td><span class="badge bg-success">Success</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary" onclick="downloadReceipt('#TXN789012', 'Mar 15, 2025', 'Unlimited Plus', 'â‚¹799', 'Success')">
                                                    <i class="fas fa-download"></i> Receipt
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>#TXN789011</td>
                                            <td>Feb 15, 2025</td>
                                            <td>Unlimited Plus</td>
                                            <td>â‚¹799</td>
                                            <td><span class="badge bg-success">Success</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary" onclick="downloadReceipt('#TXN789011', 'Feb 15, 2025', 'Unlimited Plus', 'â‚¹799', 'Success')">
                                                    <i class="fas fa-download"></i> Receipt
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>#TXN789010</td>
                                            <td>Jan 15, 2025</td>
                                            <td>Unlimited Plus</td>
                                            <td>â‚¹799</td>
                                            <td><span class="badge bg-success">Success</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-outline-primary" onclick="downloadReceipt('#TXN789010', 'Jan 15, 2025', 'Unlimited Plus', 'â‚¹799', 'Success')">
                                                    <i class="fas fa-download"></i> Receipt
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        
        <div id="profile-settings-section" class="content-section">
            <div class="row">
                <div class="col-12">
                    <h3 class="mb-4">Profile & Settings</h3>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <div class="card-body text-center">
                            <div class="profile-photo-container mb-3">
                                <img src="../images/user.png" alt="Profile Picture" class="img-thumbnail rounded-circle profile-photo">
                                <button class="btn btn-sm btn-outline-primary mt-2">Change Photo</button>
                            </div>
                            <h5 class="mb-1">Vinayak Mahadev</h5>
                            <p class="text-muted mb-3">+91 9876543210</p>
                            <div class="d-grid">
                                <button class="btn btn-primary">Edit Profile</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-8 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Personal Information</h5>
                        </div>
                        <div class="card-body">
                            <form id="profile-form">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="fullName" class="form-label">Full Name</label>
                                        <input type="text" class="form-control" id="fullName" value="Vinayak Mahadev">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="email" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="email" value="vinayak@example.com">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="phone" class="form-label">Phone Number</label>
                                        <input type="tel" class="form-control" id="phone" value="+91 9876543210" readonly>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="altPhone" class="form-label">Alternate Phone (Optional)</label>
                                        <input type="tel" class="form-control" id="altPhone">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-12">
                                        <label for="address" class="form-label">Address</label>
                                        <textarea class="form-control" id="address" rows="3"></textarea>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end">
                                    <button type="submit" class="btn btn-primary">Save Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        
        <div id="support-section" class="content-section">
            <div class="row">
                <div class="col-12">
                    <h3 class="mb-4">Support</h3>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Contact Support</h5>
                        </div>
                        <div class="card-body">
                            <form id="support-form">
                                <div class="mb-3">
                                    <label for="subject" class="form-label">Subject</label>
                                    <input type="text" class="form-control" id="subject" required>
                                </div>
                                <div class="mb-3">
                                    <label for="message" class="form-label">Message</label>
                                    <textarea class="form-control" id="message" rows="5" required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary">Send Message</button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header">
                            <h5 class="card-title mb-0">Quick Support</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-3">
                                <div class="support-contact-item">
                                    <i class="fas fa-phone-alt text-primary"></i>
                                    <div>
                                        <h6 class="mb-1">Call Us</h6>
                                        <p class="mb-0">+1 800-123-4567</p>
                                        <small class="text-muted">24/7 Customer Support</small>
                                    </div>
                                </div>
                                <div class="support-contact-item">
                                    <i class="fas fa-envelope text-primary"></i>
                                    <div>
                                        <h6 class="mb-1">Email Us</h6>
                                        <p class="mb-0">support@spectrumlink.com</p>
                                        <small class="text-muted">We'll respond within 24 hours</small>
                                    </div>
                                </div>
                                <div class="support-contact-item">
                                    <i class="fas fa-comments text-primary"></i>
                                    <div>
                                        <h6 class="mb-1">Live Chat</h6>
                                        <p class="mb-0">Chat with our support team</p>
                                        <small class="text-muted">Available 9 AM - 6 PM</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
    <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="logoutModalLabel">Confirm Logout</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to log out of your account?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Logout</button>
                </div>
            </div>
        </div>
    </div>

    
    <div class="modal fade" id="transactionDetailsModal" tabindex="-1" aria-labelledby="transactionDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="transactionDetailsModalLabel">Transaction Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="transactionDetailsContent">
                        <p><strong>Date:</strong> <span id="transactionDate"></span></p>
                        <p><strong>Plan:</strong> <span id="transactionPlan"></span></p>
                        <p><strong>Amount:</strong> <span id="transactionAmount"></span></p>
                        <p><strong>Status:</strong> <span id="transactionStatus"></span></p>
                        <p><strong>Payment Method:</strong> <span id="transactionPaymentMethod"></span></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="downloadReceiptButton">Download Receipt</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="../js/user.js"></script>

    <script>
        window.jsPDF = window.jspdf.jsPDF;

        function downloadReceipt(transactionId, date, plan, amount, status) {
            // Create new PDF document
            const doc = new jsPDF();
            
            // Set company logo and header
            doc.setFontSize(22);
            doc.setTextColor(0, 0, 255);
            doc.text('SpectrumLink', 105, 20, { align: 'center' });
            
            // Add receipt title
            doc.setFontSize(18);
            doc.setTextColor(0, 0, 0);
            doc.text('Payment Receipt', 105, 35, { align: 'center' });
            
            // Add horizontal line
            doc.setLineWidth(0.5);
            doc.line(20, 40, 190, 40);
            
            // Add transaction details
            doc.setFontSize(12);
            doc.text('Transaction Details:', 20, 55);
            
            // Create a box for transaction details
            doc.setDrawColor(220, 220, 220);
            doc.setFillColor(248, 249, 250);
            doc.rect(20, 60, 170, 50, 'F');
            
            // Add transaction information
            doc.text('Transaction ID: ' + transactionId, 30, 75);
            doc.text('Date: ' + date, 30, 85);
            doc.text('Plan: ' + plan, 30, 95);
            doc.text('Amount: ' + amount, 30, 105);
            
            // Add status with color
            doc.setTextColor(40, 167, 69);
            doc.text('Status: ' + status, 120, 75);
            
            // Reset text color
            doc.setTextColor(0, 0, 0);
            
            // Add customer details
            doc.text('Customer Details:', 20, 125);
            doc.setFontSize(11);
            doc.text('Name: Vinayak Mahadev', 30, 135);
            doc.text('Mobile: +91 9876543210', 30, 145);
            
            // Add footer
            doc.setLineWidth(0.5);
            doc.line(20, 240, 190, 240);
            
            doc.setFontSize(10);
            doc.text('Thank you for choosing SpectrumLink!', 105, 250, { align: 'center' });
            doc.text('For any queries, contact support@spectrumlink.com', 105, 260, { align: 'center' });
            
            // Add timestamp
            const timestamp = new Date().toLocaleString();
            doc.setFontSize(8);
            doc.text('Generated on: ' + timestamp, 20, 280);
            
            // Save the PDF
            doc.save(`SpectrumLink_Receipt_${transactionId.replace('#', '')}.pdf`);
        }

        // Handle logout functionality
        function handleLogout() {
            sessionStorage.removeItem('isLoggedIn');
            window.location.href = 'index.html';
        }

        // Add logout handlers
        document.getElementById('logout-dropdown').addEventListener('click', function(e) {
            e.preventDefault();
            handleLogout();
        });

        document.getElementById('logout-link').addEventListener('click', function(e) {
            e.preventDefault();
            handleLogout();
        });

        // Check if user is logged in, if not redirect to login
        document.addEventListener('DOMContentLoaded', function() {
            const isLoggedIn = sessionStorage.getItem('isLoggedIn');
            if (!isLoggedIn || isLoggedIn !== 'true') {
                window.location.href = 'loginpage.html';
            }
        });
    </script>
</body>
</html>